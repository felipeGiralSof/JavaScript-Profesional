{"version":3,"sources":["assets/MediaPlayer.js","assets/plugins/AutoPlay.js","assets/plugins/AutoPause.js","assets/index.js"],"names":["MediaPlayer","config","media","el","plugins","_initPlugins","prototype","player","play","pause","muted","value","forEach","plugin","run","togglePlay","paused","mute","unmute","toggle","AutoPlay","AutoPause","constructor","threshold","handleIntersection","bind","handleVisibilityChange","observer","IntersectionObserver","observe","document","addEventListener","entries","entry","isVisible","intersectionRatio","visibilityState","video","querySelector","button","onclick","button2","getElementById","navigator","serviceWorker","register","catch","error","console","log","message"],"mappings":";;AGAA;;AACA;;AACA;AHFA,AEAA,ADAA,MCAMqB,GFAGrB,ACAAoB,MCAT,CAAgB,CDAhB,GDAA,ACAmB,CDAEnB,ACAA,MDArB,EAA4B;AAC1B,AEAAqB,EAAAA,KFAKpB,KAAL,CEAW,EFAED,CEAA,KFAM,CAACE,EAApB;AACA,AEAE,ADDJiB,ODCOhB,CCDC,CCCCmB,ADDAjB,KDCP,GAAeL,CEAb,ADDJ,CAAmBa,ECCE,CDDrB,CDCuB,CAACV,CEApB,ADDqB,MDCR,IAAkB,ACDDG,EDChC,ICDuB,EAAgB;AEGzC,ADDI,ADDF,MEEI8B,AFFD,CAAC9B,ECCGiB,ECCE,EFFC,CEEEM,AFFDpB,KAAX,EAAiB,CEEG,CAAC4B,IDDnB,GAA0B,KAAKd,CCCrB,CAAuB,OAAvB,CAAd,QDD8B,CAAwBC,IAAxB,CAA6B,IAA7B,CAA1B;AFCF,AGCF,ADDI,ADDAlB,IAAAA,EEEEA,CHDCF,EEAEqB,CDDC,CAAChB,CEEC,GAAG,CFFX,GDCF,AGCiBV,AFFA,IAAf,QCCA,GAA8B,KCCnB,ADDwB0B,CCCR,qBDDG,CAA4BD,IAA5B,CAAiC,IAAjC,CAA9B;AFCH,AGCCtB,ADDC,ADDA,EEEDA,EAAE,EAAEkC,KADyB;AAE7BjC,EAAAA,OAAO,EAAE,CAAC,IAAIgB,iBAAJ,EAAD,EAAiB,IAAIC,kBAAJ,EAAjB;AHAXrB,AGF+B,ADC7Bc,ADAAP,CEDa,CAAf,ADCEO,ADAAP,GCAG,CAACA,EDAE,CAACC,EDCE,CAACF,AEDP,CDAH,CCAW,OFCb,CAAsBD,YAAtB,GAAqC,YAAU;AAC7C,AGEF,ADHI,ADAH,CAND,KESMkC,EHFEhC,CEDCA,GCGG,EHFE,CGECuB,ADHX,EFCa,CEDCvB,KCGK,CAAC+B,ADHpB,aCGW,CAAuB,QAAvB,CAAf;AHDI9B,AEDA,IFCAA,IAAI,EAAG,AEDDmB,MFCO,EEDC,GFCInB,AEDD,IFCJ,AEDQoB,EFAR,kBEAI,CAAyB,KAAKJ,kBAA9B,EAAkD;AFEnEf,AGCJ8B,ADFMhB,IFCFd,EGCE,ADFAc,CCECiB,EHDE,EAAG,GGCZ,CDFe,ADDApB,EDEG,AGCD,ADFA,KFCMX,AEDDc,CCEChB,IHDL,EAFD,AGGY,CAACQ,UAAP,EAAvB;AHAIb,AEHmE,IFGnEA,CEHiB,CAAjB,GFGK,EAAG,KAAKA,KAHA;AGKjB,ADDIyB,IAAAA,ECCEc,MDDM,CCCC,ADDAZ,GCCGC,IDDZ,CAAiB,GCCG,CAACY,CDDCnC,MAAL,CAAYL,KAA7B,CCCY,CAAwB,YAAxB,CAAhB;AHDI,AEEA4B,IAAAA,IFFIpB,IEEI,CFFR,AEESqB,GFFG,aEEZ,CAA0B,kBAA1B,EAA8C,KAAKL,sBAAnD;AFDE,AGCNe,ADEG,OCFI,CAACD,KHDK,EGCb,GHDkBtC,AGCA,KHDL,CAAWQ,AGCAH,KHDlB,CGCwB,CAACY,MAAP,EAAxB;AHAK,KANY;AGQjB,ADEEK,EAAAA,ECFC,gBDEiB,CAACQ,ECFCW,KDEF,EAAS,ECF7B,EAAgC;AHD5B,AGEFA,ADEE,ECFFA,MHFMjC,EEIEuB,CCFC,CAACW,CHFR,CAAUjC,CEIC,GAAGqB,CFJd,EAAgB,IGElB,ADEuB,CCFCa,ADEA,CAAD,CAArB,MCFF,CAAiC,sCAAjC,EAA2CC,KAA3C,CAAiDC,KAAK,IAAG;AHDrD,AGEFC,ADEA,ICFAA,MDEMd,CFJChC,AGEA,CAAC+C,GAAR,CHFE,AGEUF,CHFCrC,EEIE,ECFE,CHFf,AGEgBwC,ADEAjB,GFJGtB,EEIE,CAACwB,CCFxB,CHFE,eEIgB,IAA2B,KAAKZ,SAAlD;AFHC,AGEF,GAFD;AAGD,ADCG,QAAGW,SAAH,EAAa;AFbA,AEcX,GFdJ,QEcS3B,MAAL,CAAYC,IAAZ;AFFJ,AEGG,KAFD,EFDGJ,IEGE,GFHP,CAAaQ,OAAb,CAAqBC,MAAM,IAAI;AAC7BA,AEGE,IFHFA,MAAM,CAACC,AEGAP,GFHP,CAAWA,EEGT,CAAYE,GFHd,EEGE;AFFH,AEGE,GFLH;AAGD,AEGE,CFnBH;;AAkBAT,AEEE0B,EAAAA,SFFS,CAACpB,SAAZ,CAAsBE,EEEE,EFFxB,CEE0B,EFFG,YAAW;AACtC,AEEE,OFFGN,GEEGgC,EFFR,CAAW1B,IAAX,EEEiB,GAAGsB,QAAQ,CAACM,eAAT,KAA6B,SAA/C;AFDH,CAFD;AEII,QAAGF,SAAH,EAAa;AFAjBlC,AECM,WFDK,AECAO,CFDCD,KECN,CAAYE,GFDlB,CAAsBC,AEChB,KFDN,GAA8B,YAAY;AACxC,AECG,KAFD,EFCGP,IECE,CFDP,CAAWO,KAAX;AACD,AECK,CFHN,UEGWF,MAAL,CAAYE,KAAZ;AACD;AFALT,AECG,WFDQ,CAACM,SAAZ,CAAsBS,UAAtB,GAAmC,YAAY;AAC7C,MAAG,KAAKb,KAAL,CAAWc,MAAd,EAAqB;AACnB,AEnCY,SFmCPR,IAAL;AACD,GAFD,MAEK;AACH,SAAKC,KAAL,CEDWY;AFEZ;AACF,CAND;;AAQArB,WAAW,CAACM,SAAZ,CAAsBW,IAAtB,GAA6B,YAAY;AACvC,OAAKf,KAAL,CAAWQ,KAAX,GAAmB,IAAnB;AACD,CAFD;;AAIAV,WAAW,CAACM,SAAZ,CAAsBY,MAAtB,GAA+B,YAAY;AACzC,OAAKhB,KAAL,CAAWQ,KAAX,GAAmB,KAAnB;AACD,CAFD;;AAIAV,WAAW,CAACM,SAAZ,CAAsBa,MAAtB,GAA+B,YAAY;AACzC,MAAG,KAAKjB,KAAL,CAAWQ,KAAd,EAAoB;AAClB,SAAKQ,MAAL;AACD,GAFD,MAEK;AACH,SAAKD,IAAL;AACD;AACF,CAND;;eASejB","file":"assets.8f4429fc.js","sourceRoot":"..","sourcesContent":["function MediaPlayer(config){\n  this.media = config.el;\n  this.plugins = config.plugins || [];\n\n  this._initPlugins();\n}\n\nMediaPlayer.prototype._initPlugins = function(){\n  const player = {\n    play : () => this.play(),\n    pause : () => this.pause(),\n    media : this.media,\n    get muted() {\n      return this.media.muted;\n    },\n    set muted(value){\n      this.media.muted = value;\n    }\n  };\n\n  this.plugins.forEach(plugin => {\n    plugin.run(player);\n  })\n}\n\nMediaPlayer.prototype.play = function (){\n  this.media.play(); \n}\n\nMediaPlayer.prototype.pause = function () {\n  this.media.pause();\n}\n\nMediaPlayer.prototype.togglePlay = function () {\n  if(this.media.paused){\n    this.play();\n  }else{\n    this.pause();\n  }\n};\n\nMediaPlayer.prototype.mute = function () {\n  this.media.muted = true;\n}\n\nMediaPlayer.prototype.unmute = function () {\n  this.media.muted = false;\n}\n\nMediaPlayer.prototype.toggle = function () {\n  if(this.media.muted){\n    this.unmute();\n  }else{\n    this.mute();\n  }\n};\n\n\nexport default MediaPlayer;","function AutoPlay(){}\nAutoPlay.prototype.run = function(player){\n  if(!player.muted){\n    player.muted = true;\n  }\n  \n  player.play();\n}\nexport default AutoPlay;","class AutoPause {\n  constructor(){\n    this.threshold = 0.25;\n    this.handleIntersection = this.handleIntersection.bind(this);\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n  } \n  run(player){\n    this.player = player;\n    const observer = new IntersectionObserver(this.handleIntersection, {\n      threshold: this.threshold\n    });\n\n    observer.observe(this.player.media)\n\n    document.addEventListener(\"visibilitychange\", this.handleVisibilityChange)\n\n  }\n\n  handleIntersection(entries){\n    const entry = entries[0];\n    const isVisible = entry.intersectionRatio >= this.threshold\n    if(isVisible){\n      this.player.play();\n    }else{\n      this.player.pause();\n    }\n  }\n  handleVisibilityChange(){\n    const isVisible = document.visibilityState === \"visible\";\n    if(isVisible){\n      this.player.play();\n    }else{\n      this.player.pause();\n    }\n  }\n}\nexport default AutoPause;","import MediaPlayer from \"./MediaPlayer.js\";\nimport AutoPlay from \"./plugins/AutoPlay.js\";\nimport AutoPause from \"./plugins/AutoPause.js\";\n\nconst video = document.querySelector(\"video\");\nconst player = new MediaPlayer({\n  el: video, \n  plugins: [new AutoPlay(), new AutoPause()],\n});\n\nconst button = document.querySelector(\"button\");\nbutton.onclick = () => player.togglePlay();\n\nconst button2 = document.getElementById(\"muteButton\");\nbutton2.onclick = () => player.toggle();\n\nif('serviceWorker' in navigator){\n  navigator.serviceWorker.register('/sw.js').catch(error =>{\n    console.log(error.message);\n  });\n}"]}